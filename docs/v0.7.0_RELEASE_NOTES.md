# xAI SDK Go v0.7.0 Release Notes

**Release Date**: November 20, 2025

## Overview

Version 0.7.0 focuses on code quality improvements through comprehensive linting fixes, reduced cyclomatic complexity, and intentional API naming improvements to follow Go best practices.

## üéØ Key Highlights

### Code Quality Improvements
- **Reduced Cyclomatic Complexity**: Refactored complex functions into focused, maintainable helper methods
- **Linting Clean**: Addressed all golangci-lint issues (except golangci-lint version mismatch with Go 1.24)
- **Better Code Organization**: Split large functions into single-responsibility helpers

### New Features
- **Tool Call Status Tracking**: Real-time tracking of server-side tool execution lifecycle
- **Batch File Upload**: Concurrent file uploads with progress tracking and graceful error handling

### API Improvements
- **Naming Conventions**: Removed package name stuttering following Go best practices

## ‚ö†Ô∏è Breaking Changes

This release includes **intentional breaking changes** to improve API ergonomics:

### 1. Image Package: `ImageInput` ‚Üí `Input`

**Before (v0.6.0):**
```go
var input *image.ImageInput
```

**After (v0.7.0):**
```go
var input *image.Input
```

**Rationale**: Avoids stuttering (`image.ImageInput` ‚Üí `image.Input`)

### 2. Chat Package: `ChatServiceClient` ‚Üí `ServiceClient`

**Before (v0.6.0):**
```go
var client chat.ChatServiceClient
```

**After (v0.7.0):**
```go
var client chat.ServiceClient
```

**Rationale**: Avoids stuttering (`chat.ChatServiceClient` ‚Üí `chat.ServiceClient`)

## üìä Impact Assessment

**Severity**: **LOW**

- These are **compile-time errors** that are easy to catch
- Simple mechanical fixes (find-and-replace)
- Most users won't be affected as they use `Client` methods with type inference
- No runtime behavior changes

## üîß Migration Guide

### Automated Migration

Use find-and-replace in your codebase:

1. Replace `image.ImageInput` with `image.Input`
2. Replace `chat.ChatServiceClient` with `chat.ServiceClient`

### Example Migration

```go
// Before v0.7.0
func processImage(input *image.ImageInput) error {
    var client chat.ChatServiceClient
    // ... your code
}

// After v0.7.0
func processImage(input *image.Input) error {
    var client chat.ServiceClient
    // ... your code
}
```

## üêõ Fixed Issues

### Cyclomatic Complexity
- **errors.go**: Refactored `mapGRPCCodeToErrorType` from switch (complexity 15+) to map lookup (complexity 2)
- **config.go**: Split `LoadFromEnvironment` into 5 focused helpers
- **config.go**: Split `Validate` into 4 focused helpers

### Security Warnings
- Added `//nolint:gosec` for intentional security configurations
- `DefaultTokenizerEndpoint`: False positive (not a credential)
- `InsecureSkipVerify`: Intentional for development/testing

### Style Issues
- Fixed if-else chains in test files
- Converted nested conditionals to switch statements
- Fixed unused context assignment

## ‚úÖ Quality Metrics

- **Tests**: 100% passing (`go test ./...`)
- **Vet**: Clean (`go vet ./...`)
- **Staticcheck**: Only warnings in generated protobuf code (unrelated)
- **Test Coverage**: Enhanced for metadata and SDK version handling

## üì¶ What's New

### Tool Call Status Tracking
```go
// Track server-side tool execution
toolCalls := response.ToolCalls()
for _, tc := range toolCalls {
    status := tc.Status()  // IN_PROGRESS, COMPLETED, INCOMPLETE, FAILED
    if status == "FAILED" {
        errMsg := tc.ErrorMessage()
        // Handle error
    }
}
```

### Batch File Upload
```go
// Upload multiple files concurrently
results, err := client.Files().BatchUpload(ctx, filePaths, &files.BatchUploadOptions{
    Concurrency: 50,
    Callback: func(index int, result *files.BatchUploadResult) {
        if result.Error != nil {
            fmt.Printf("File %d failed: %v\n", index, result.Error)
        } else {
            fmt.Printf("File %d uploaded: %s\n", index, result.File.ID)
        }
    },
})
```

## üîÑ Upgrade Path

### From v0.6.0 to v0.7.0

1. **Update dependency**:
   ```bash
   go get github.com/ZaguanLabs/xai-sdk-go@v0.7.0
   ```

2. **Run tests** to catch compile-time errors:
   ```bash
   go test ./...
   ```

3. **Fix naming issues** (if any):
   - Replace `image.ImageInput` ‚Üí `image.Input`
   - Replace `chat.ChatServiceClient` ‚Üí `chat.ServiceClient`

4. **Verify** everything compiles:
   ```bash
   go build ./...
   ```

## üìö Documentation

- Updated CHANGELOG.md with detailed migration guide
- All examples updated to use new naming conventions
- Enhanced inline documentation

## üôè Acknowledgments

Thank you to all contributors and users who provided feedback on code quality and API design!

## üîó Links

- **GitHub Release**: https://github.com/ZaguanLabs/xai-sdk-go/releases/tag/v0.7.0
- **Full Changelog**: https://github.com/ZaguanLabs/xai-sdk-go/blob/main/CHANGELOG.md
- **Documentation**: https://github.com/ZaguanLabs/xai-sdk-go/blob/main/README.md

---

**Questions or Issues?** Please open an issue on GitHub: https://github.com/ZaguanLabs/xai-sdk-go/issues
