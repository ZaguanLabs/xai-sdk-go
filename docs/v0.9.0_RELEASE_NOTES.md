# v0.9.0 Release Notes

## ðŸŽ¯ Focus: Python SDK v1.4.1 Parity - Include Options & Inline Citations

This release brings the Go SDK up to parity with Python SDK v1.4.1 by adding support for include options, inline citations, and tool call type tracking.

## What's New

### Include Options

Control what additional output is included in API responses:

```go
// Request inline citations and web search output
req := chat.NewRequest("grok-3",
    chat.WithInclude(
        chat.IncludeInlineCitations,
        chat.IncludeWebSearchCallOutput,
    ),
    chat.WithServerTool(chat.WebSearchTool()),
)
```

Available options:
- `IncludeWebSearchCallOutput` - Include web search call output
- `IncludeXSearchCallOutput` - Include X search call output
- `IncludeCodeExecutionCallOutput` - Include code execution call output
- `IncludeCollectionsSearchCallOutput` - Include collections search call output
- `IncludeDocumentSearchCallOutput` - Include document search call output
- `IncludeMCPCallOutput` - Include MCP call output
- `IncludeInlineCitations` - Include inline citations in responses

### Inline Citations

Access detailed citation information embedded in responses:

```go
response, _ := req.Sample(ctx, client)

// Get inline citations
citations := response.InlineCitations()
for _, cite := range citations {
    fmt.Printf("Citation %s at index %d\n", cite.ID(), cite.StartIndex())
    
    if web := cite.WebCitation(); web != nil {
        fmt.Printf("  Web: %s\n", web.URL())
    }
    if x := cite.XCitation(); x != nil {
        fmt.Printf("  X: %s\n", x.URL())
    }
    if col := cite.CollectionsCitation(); col != nil {
        fmt.Printf("  Collection: %s (score: %.2f)\n", col.FileID(), col.Score())
    }
}
```

Citation types:
- **WebCitationInfo** - Web source citations with URL
- **XCitationInfo** - X/Twitter citations with URL
- **CollectionsCitationInfo** - Collection citations with file ID, chunk ID, content, score

### Tool Call Type Tracking

Distinguish between client-side and server-side tool calls:

```go
response, _ := req.Sample(ctx, client)

for _, tc := range response.ToolCalls() {
    fmt.Printf("Tool: %s, Type: %s\n", tc.Name(), tc.Type())
    
    if tc.IsClientSide() {
        // Execute locally
        result := executeFunction(tc.Name(), tc.Arguments())
        // ... handle result
    } else if tc.IsServerSide() {
        // Already executed by server
        fmt.Printf("Server-side tool: %s\n", tc.Type())
    }
}
```

Tool call types:
- `ToolCallTypeClientSide` - Client-side tool (needs local execution)
- `ToolCallTypeWebSearch` - Server-side web search
- `ToolCallTypeXSearch` - Server-side X search
- `ToolCallTypeCodeExecution` - Server-side code execution
- `ToolCallTypeCollectionsSearch` - Server-side collections search
- `ToolCallTypeMCP` - Server-side MCP tool
- `ToolCallTypeDocumentSearch` - Server-side document search

## Proto Updates

New proto definitions added to `chat.proto`:
- `IncludeOption` enum
- `InlineCitation`, `WebCitation`, `XCitation`, `CollectionsCitation` messages
- `include` field in `GetCompletionsRequest` and `RequestSettings`
- `citations` field in `CompletionMessage` and `Delta`

## Breaking Changes

None. All changes are additive and backward compatible.

## Migration Guide

No migration required. Existing code continues to work unchanged.

To use new features, simply add include options to your requests:

```go
// Before (still works)
req := chat.NewRequest("grok-3",
    chat.WithServerTool(chat.WebSearchTool()),
)

// After (with new features)
req := chat.NewRequest("grok-3",
    chat.WithServerTool(chat.WebSearchTool()),
    chat.WithInclude(chat.IncludeInlineCitations),
)
```

## Testing

- All 200+ tests passing
- New test file: `xai/chat/include_test.go`
- Comprehensive coverage for include options, inline citations, and tool call types

## Python SDK Parity

This release achieves parity with Python SDK v1.4.1:
- âœ… Include options for response customization
- âœ… Inline citations with web, X, and collections support
- âœ… Tool call type tracking (client-side vs server-side)
